/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * PlagiabustServerManager.java
 *
 * Created on Jul 24, 2011, 1:31:29 PM
 */
package gui.form;

import java.util.ArrayList;
import javax.swing.JOptionPane;
import plagiabustwebserver.Client;

/**
 *
 * @author Brave Heart
 */
public class PlagiabustServerManager extends javax.swing.JFrame {

    private PlagiabustServerDocumentManagerForm serverDocumentServerManager = null;
    private ArrayList<String> documentList = null;
    private String DefaultSolrUrl = "http://localhost:8983/solr";
    private static String solrUrl = "http://localhost:8983/solr";
    /** Creates new form PlagiabustServerManager */
    public PlagiabustServerManager() {
        initComponents();
        serverDocumentServerManager = new PlagiabustServerDocumentManagerForm();
        documentList = new ArrayList<String>();
        ServerUrlTextField.setText(DefaultSolrUrl);
        this.setIconImage(Main.getPlagiabustImage());
    }

    public static String getSolrURL(){
        return solrUrl;
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        PlagiabustServerImageLabel = new javax.swing.JLabel();
        CommandPanel = new javax.swing.JPanel();
        DoneButton = new javax.swing.JButton();
        SeverUrlLabel = new javax.swing.JLabel();
        ServerUrlTextField = new javax.swing.JTextField();
        AddDocumentPanel = new javax.swing.JPanel();
        DocumentManagerButton = new javax.swing.JButton();
        SeverUrlLabel1 = new javax.swing.JLabel();
        SubmitToServerButton = new javax.swing.JButton();
        SubmitToServerLable = new javax.swing.JLabel();
        documentAddingProgressBar = new javax.swing.JProgressBar();
        progressLabel = new javax.swing.JLabel();
        SetDefaultsButton = new javax.swing.JButton();
        DeleteDocumentPanel = new javax.swing.JPanel();
        DeleteDocumentButton = new javax.swing.JButton();
        DeleteDocumentLabel = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        currentProgressTextArea = new javax.swing.JTextArea();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Plagiabust Web Server Manager");
        setResizable(false);

        PlagiabustServerImageLabel.setBackground(new java.awt.Color(255, 255, 255));
        PlagiabustServerImageLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/gui/resource/image/background/DocumentManager.png"))); // NOI18N

        CommandPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Commands :", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 12))); // NOI18N

        DoneButton.setFont(new java.awt.Font("Tahoma", 0, 12));
        DoneButton.setText("Done");
        DoneButton.setPreferredSize(new java.awt.Dimension(180, 40));
        DoneButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                DoneButtonActionPerformed(evt);
            }
        });

        SeverUrlLabel.setFont(new java.awt.Font("Tahoma", 0, 12));
        SeverUrlLabel.setText("Plagiabust Web Search Server :");

        ServerUrlTextField.setFont(new java.awt.Font("Tahoma", 0, 12));
        ServerUrlTextField.setText("http://localhost:8983/solr");

        AddDocumentPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Add Documents To Server", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 12))); // NOI18N

        DocumentManagerButton.setFont(new java.awt.Font("Tahoma", 0, 12));
        DocumentManagerButton.setText("Document Manager");
        DocumentManagerButton.setPreferredSize(new java.awt.Dimension(180, 40));
        DocumentManagerButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                DocumentManagerButtonActionPerformed(evt);
            }
        });

        SeverUrlLabel1.setFont(new java.awt.Font("Tahoma", 0, 12));
        SeverUrlLabel1.setText("Select Documents To Submit");

        SubmitToServerButton.setFont(new java.awt.Font("Tahoma", 0, 12));
        SubmitToServerButton.setText("Submit");
        SubmitToServerButton.setPreferredSize(new java.awt.Dimension(180, 40));
        SubmitToServerButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                SubmitToServerButtonActionPerformed(evt);
            }
        });

        SubmitToServerLable.setFont(new java.awt.Font("Tahoma", 0, 12));
        SubmitToServerLable.setText("Submit To Plagiabust Server");

        progressLabel.setFont(new java.awt.Font("Tahoma", 0, 12));
        progressLabel.setText("Progress");

        javax.swing.GroupLayout AddDocumentPanelLayout = new javax.swing.GroupLayout(AddDocumentPanel);
        AddDocumentPanel.setLayout(AddDocumentPanelLayout);
        AddDocumentPanelLayout.setHorizontalGroup(
            AddDocumentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(AddDocumentPanelLayout.createSequentialGroup()
                .addGroup(AddDocumentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(AddDocumentPanelLayout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addGroup(AddDocumentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(AddDocumentPanelLayout.createSequentialGroup()
                                .addComponent(SubmitToServerLable)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(SubmitToServerButton, javax.swing.GroupLayout.PREFERRED_SIZE, 147, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(AddDocumentPanelLayout.createSequentialGroup()
                                .addComponent(SeverUrlLabel1)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(DocumentManagerButton, javax.swing.GroupLayout.PREFERRED_SIZE, 147, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(AddDocumentPanelLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(documentAddingProgressBar, javax.swing.GroupLayout.PREFERRED_SIZE, 341, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(10, 10, 10)
                        .addComponent(progressLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        AddDocumentPanelLayout.setVerticalGroup(
            AddDocumentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(AddDocumentPanelLayout.createSequentialGroup()
                .addGroup(AddDocumentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(SeverUrlLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(DocumentManagerButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(AddDocumentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(SubmitToServerButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(SubmitToServerLable, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 78, Short.MAX_VALUE)
                .addGroup(AddDocumentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(documentAddingProgressBar, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(progressLabel, javax.swing.GroupLayout.Alignment.TRAILING)))
        );

        SetDefaultsButton.setFont(new java.awt.Font("Tahoma", 0, 12));
        SetDefaultsButton.setText("Set Defaults");
        SetDefaultsButton.setPreferredSize(new java.awt.Dimension(180, 40));
        SetDefaultsButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                SetDefaultsButtonActionPerformed(evt);
            }
        });

        DeleteDocumentPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Delete Documents : ", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 12))); // NOI18N

        DeleteDocumentButton.setFont(new java.awt.Font("Tahoma", 0, 12));
        DeleteDocumentButton.setText("Delete");
        DeleteDocumentButton.setPreferredSize(new java.awt.Dimension(180, 40));
        DeleteDocumentButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                DeleteDocumentButtonActionPerformed(evt);
            }
        });

        DeleteDocumentLabel.setFont(new java.awt.Font("Tahoma", 0, 12));
        DeleteDocumentLabel.setText("Delete Document From Server");

        javax.swing.GroupLayout DeleteDocumentPanelLayout = new javax.swing.GroupLayout(DeleteDocumentPanel);
        DeleteDocumentPanel.setLayout(DeleteDocumentPanelLayout);
        DeleteDocumentPanelLayout.setHorizontalGroup(
            DeleteDocumentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, DeleteDocumentPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(DeleteDocumentLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(DeleteDocumentButton, javax.swing.GroupLayout.PREFERRED_SIZE, 129, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(141, 141, 141))
        );
        DeleteDocumentPanelLayout.setVerticalGroup(
            DeleteDocumentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DeleteDocumentPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(DeleteDocumentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(DeleteDocumentButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(DeleteDocumentLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(16, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout CommandPanelLayout = new javax.swing.GroupLayout(CommandPanel);
        CommandPanel.setLayout(CommandPanelLayout);
        CommandPanelLayout.setHorizontalGroup(
            CommandPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(CommandPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(CommandPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(DeleteDocumentPanel, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(CommandPanelLayout.createSequentialGroup()
                        .addComponent(SeverUrlLabel)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(ServerUrlTextField, javax.swing.GroupLayout.DEFAULT_SIZE, 287, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, CommandPanelLayout.createSequentialGroup()
                        .addComponent(SetDefaultsButton, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 219, Short.MAX_VALUE)
                        .addComponent(DoneButton, javax.swing.GroupLayout.PREFERRED_SIZE, 129, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(AddDocumentPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        CommandPanelLayout.setVerticalGroup(
            CommandPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(CommandPanelLayout.createSequentialGroup()
                .addGroup(CommandPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(SeverUrlLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(ServerUrlTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(AddDocumentPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(DeleteDocumentPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(CommandPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(SetDefaultsButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(DoneButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
        );

        currentProgressTextArea.setBackground(new java.awt.Color(0, 0, 0));
        currentProgressTextArea.setColumns(20);
        currentProgressTextArea.setEditable(false);
        currentProgressTextArea.setFont(new java.awt.Font("Tahoma", 0, 12));
        currentProgressTextArea.setForeground(new java.awt.Color(255, 255, 255));
        currentProgressTextArea.setLineWrap(true);
        currentProgressTextArea.setRows(4);
        currentProgressTextArea.setWrapStyleWord(true);
        currentProgressTextArea.setAutoscrolls(false);
        jScrollPane1.setViewportView(currentProgressTextArea);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(PlagiabustServerImageLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 222, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(CommandPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(PlagiabustServerImageLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 199, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 209, Short.MAX_VALUE))
                    .addComponent(CommandPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void DocumentManagerButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_DocumentManagerButtonActionPerformed

        serverDocumentServerManager.setVisible(true);
        documentList = this.serverDocumentServerManager.getDocumentList();
}//GEN-LAST:event_DocumentManagerButtonActionPerformed

    private void DoneButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_DoneButtonActionPerformed
        solrUrl = ServerUrlTextField.getText();
        this.dispose();
}//GEN-LAST:event_DoneButtonActionPerformed

    private void SubmitToServerButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_SubmitToServerButtonActionPerformed
        if (documentList.isEmpty()) {
            JOptionPane.showMessageDialog(this, "No documents are selected to be submitted.", "Error", JOptionPane.ERROR_MESSAGE);
        } else {
            String localhost = ServerUrlTextField.getText();
            Client sc = new Client(localhost);
            //sc.commitDocumentsToSolrServer(documentList);
            sc.commitDocumentAsBackGroundWork(documentAddingProgressBar, progressLabel, documentList, currentProgressTextArea);
        }
        if (!ServerUrlTextField.getText().equals(DefaultSolrUrl)) {
            JOptionPane.showMessageDialog(this, "Default Solr url must be: " + DefaultSolrUrl, "Warning", JOptionPane.WARNING_MESSAGE);
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_SubmitToServerButtonActionPerformed

    private void SetDefaultsButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_SetDefaultsButtonActionPerformed
        ServerUrlTextField.setText(DefaultSolrUrl);
        // TODO add your handling code here:
    }//GEN-LAST:event_SetDefaultsButtonActionPerformed

    private void DeleteDocumentButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_DeleteDocumentButtonActionPerformed
        if (!ServerUrlTextField.getText().equals(DefaultSolrUrl)) {
            JOptionPane.showMessageDialog(this, "Default Solr url must be: " + DefaultSolrUrl, "Warning", JOptionPane.WARNING_MESSAGE);
        }
        String localhost = ServerUrlTextField.getText();
        Client sc = new Client(localhost);
        sc.deleteAllDocumentFromServer();
        // TODO add your handling code here:
    }//GEN-LAST:event_DeleteDocumentButtonActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel AddDocumentPanel;
    private javax.swing.JPanel CommandPanel;
    private javax.swing.JButton DeleteDocumentButton;
    private javax.swing.JLabel DeleteDocumentLabel;
    private javax.swing.JPanel DeleteDocumentPanel;
    private javax.swing.JButton DocumentManagerButton;
    private javax.swing.JButton DoneButton;
    private javax.swing.JLabel PlagiabustServerImageLabel;
    private javax.swing.JTextField ServerUrlTextField;
    private javax.swing.JButton SetDefaultsButton;
    private javax.swing.JLabel SeverUrlLabel;
    private javax.swing.JLabel SeverUrlLabel1;
    private javax.swing.JButton SubmitToServerButton;
    private javax.swing.JLabel SubmitToServerLable;
    private javax.swing.JTextArea currentProgressTextArea;
    private javax.swing.JProgressBar documentAddingProgressBar;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JLabel progressLabel;
    // End of variables declaration//GEN-END:variables
}
